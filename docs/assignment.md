# Agents – LLM проєкт

Ваше завдання: створити LLM-агента, який має певний набір інструментів і використовує їх. Ви вільні обрати самостійно, яку задачу розв’язує цей агент, або взяти нижче запропонований варіант завдання, в якому агент приймає іспит з курсу NLP.


Це завдання можна виконувати командою до 3-6 людей.


Вашого агента мають перевірити кілька інших студентів. Читайте розділ “Здача”.

Дедлайн:		18 грудня 2025 року (виконання)
		  	24 грудня 2025 року (перевірка)
Лекція:      	TBD
Live coding: 	TBD


## AI Examiner Agent
### Алгоритм роботи бота
Це лише запропонований варіант, ви не зобов’язані його дотримуватися.


1. Бот питає в студента ім’я та email.
2. Після отримання цієї інформації, система викликає функцію start_exam(email: str, name: str) -> list[str]. Ця функція повертає список тем, які потрібно опитати. Детальніше про функції буде далі.
3. Бот починає розпитувати студента про отримані теми.
    1. Іспит йде у форматі діалогу, тож на кожну тему може припадати кілька ходів діло
    2. До наступного питання переходимо:
        1. При отриманні достатньо якісної відповіді на запитання.
        2. Коли студент явно каже, що не знає відповіді або не може додати нічого нового.
        3. Коли стає зрозумілим рівень знань студента й подальші кроки навряд чи призведуть до іншої оцінки.
4. Після завершення іспиту (тобто після останнього питання):
    1. Бот показує студентові результат: оцінку та відгук (що було добре, над чим варто попрацювати ще)
    2. Бот викликає функцію `end_exam(email: str, score: float, history: list[Message])`


### Функції
Бот має викликати функції у відповідні моменти. Ці функції мають бути імплементовані як звичайні пайтонівські функції. Можете максимально їх спрощувати. Наприклад, замість бази даних можна зберігати все у файлах або навіть просто друкувати на екран.

def start_exam(email: str, name: str) -> list[str]
Викликається, коли бот має достатньо інформації про студента, щоб почати іспит. Ця функція робить запис в базі даних про початок іспиту та повертає список з 2-3 випадково обраних тем для іспиту.

Якщо студента не знайдено в базі даних, ця функція повертає помилку. У такому разі, бот має уточнити дані в студента.


Для імплементації цієї функції вам знадобиться:
список тем
список студентів.


def get_next_topic() -> str:
Виклакається, коли боту потрібна нова тема для обговорення. Повертає назву теми.


def end_exam(email: str, score: float, history: list[Message]) -> None:


Викликається в кінці іспиту. Записує результат іспиту. `score` – оцінка по шкалі 0..10. `history` – повна історія чату зі студентом. `Message` – словник у наступному форматі:

{
    “role”: “system” | “user” | “tool_call”,
    “content”: string,
    “datetime”: “2025-12-08T13:08:50”
}

## Обраний проєкт: Paper Survey Agent

Замість реалізації запропонованого варіанту "AI Examiner Agent" у цьому проєкті реалізується альтернативна агентна система на базі великих мовних моделей, яка повністю відповідає загальним вимогам курсового завдання.

Обраною задачею є розробка **Paper Survey Agent** — багатокомпонентної LLM-системи, призначеної для автоматизованого огляду наукової літератури за заданою темою.

Система приймає від користувача тему дослідження та формує структурований огляд релевантних наукових публікацій, включно з індивідуальними резюме статей та узагальненим аналізом напряму.

## Функціональні вимоги

Система Paper Survey Agent повинна задовольняти такі вимоги:

- Користувач вводить тему дослідження.
- Система автоматично знаходить щонайменше 10 релевантних наукових публікацій за цільовий час до 10 хвилин (за умови доступності API).
- Публікації отримуються з відкритих наукових джерел (наприклад, arXiv, Semantic Scholar, та/або інші джерела).
- Для кожної публікації формується структуроване резюме, яке містить:
  - основні результати (key findings),
  - використані методи,
  - науковий внесок,
  - обмеження та недоліки роботи.
- Фінальний результат містить узагальнений огляд напряму, що включає:
  - загальні висновки,
  - поточні тренди досліджень,
  - типові методології,
  - можливі напрями подальших досліджень.


## Архітектура системи

Система реалізована у вигляді одного LLM-агента, який керує багатокроковим пайплайном обробки завдання та активно використовує зовнішні інструменти (Python-функції).

Попри використання одного мовного агента, система демонструє агентну
поведінку завдяки:
- поетапному плануванню дій,
- використанню інструментів для взаємодії з зовнішніми ресурсами,
- контролю стану виконання,
- валідації та перевірці результатів на кожному етапі.


## Пайплайн виконання

LLM-агент виконує завдання у вигляді послідовності логічних етапів:

1. **Планування (Planning stage)**  
   Агент аналізує тему, введену користувачем, та генерує набір
   уточнених пошукових запитів.

2. **Отримання публікацій (Retrieval stage)**  
   Агент викликає інструменти для пошуку наукових публікацій
   у зовнішніх джерелах.

3. **Фільтрація та ранжування (Ranking stage)**  
   Отримані публікації очищуються від дублікатів та впорядковуються
   за релевантністю.

4. **Узагальнення окремих публікацій (Summarization stage)**  
   Для кожної обраної публікації агент генерує структуроване резюме
   за заздалегідь визначеною схемою.

5. **Синтез огляду (Synthesis stage)**  
   Агент формує узагальнений аналітичний огляд напряму досліджень
   на основі всіх індивідуальних резюме.

6. **Валідація результату (Validation stage)**  
   Результат перевіряється на повноту, коректність структури
   та відповідність вимогам.



## Інструменти агента

LLM-агент використовує такі інструменти:

- `plan_queries(topic: str) -> list[str]`  
  Генерація пошукових запитів.

- `retrieve_papers(query: str) -> list[Paper]`  
  Отримання кандидатних публікацій з наукових API.

- `rank_and_deduplicate(papers: list[Paper]) -> list[Paper]`  
  Фільтрація та ранжування публікацій.

- `summarize_paper(paper: Paper) -> PaperSummary`  
  Генерація структурованого резюме публікації.

- `validate_summary(summary: PaperSummary) -> bool`  
  Перевірка коректності резюме.

- `synthesize_review(summaries: list[PaperSummary]) -> SynthesisResult`  
  Формування фінального огляду.

- `validate_synthesis(result: SynthesisResult) -> bool`  
  Валідація фінального результату.


## Валідація результатів

Для забезпечення стабільності та якості результатів у системі
використовується валідація структур даних на основі схем.

Перевіряється:
- наявність усіх обовʼязкових полів у резюме публікацій;
- мінімальна кількість обраних публікацій (не менше 10);
- відсутність дублікатів;
- відповідність структури фінального огляду заданим вимогам.

У випадку невдалої валідації агент повторює відповідний етап пайплайну.



### Інтерфейс користувача
Для створення вебінтерфейсу до вашого додатка можна використовувати будь-які фреймворки та технології. Однак я наполегливо рекомендую спробувати один з двох фреймворків, спеціально створених для швидкого написання прототипів та демок моделей машинного навчання:
https://www.gradio.app/
https://streamlit.io/

Інтерфейс містить:
- поле для введення теми дослідження;
- додаткові параметри пошуку (опційно);
- поле для введення API-ключа LLM;
- структуроване відображення результатів огляду.


### Deployment
Готовий додаток можна розмістити на безплатному сервісі HuggingFace Spaces. Інструкція є, наприклад, тут:
https://huggingface.co/docs/hub/en/spaces-sdks-gradio


## Тестування та оцінювання (опційно)

Проєкт містить набір автоматизованих модульних та інтеграційних тестів.
Покриття коду тестами повинно перевищувати 80%.

Тести охоплюють:
- логіку пошуку та дедуплікації публікацій;
- коректність ранжування;
- валідацію структур даних резюме та узагальнень;
- виконання повного пайплайну з використанням моків зовнішніх API.



## Здача роботи
Для зарахування роботи необхідно відправити програмний код, посилання на запущений сервіс та короткий опис виконаної роботи на email. Перевіряти буду не лише я, а й кілька інших студентів. Вам також треба буде перевірити одну роботу.


Алгоритм здачі:
1. До 19 грудня зареєструйте свій проєкт тут.
2. 19 грудня отримайте список своїх рецензентів за тим самим посиланням (заново “почніть” роботу – на цей раз вам повернеться список email)
3. Надішліть електронного листа на oleksii.o.syvokon@lpnu.ua та всім своїм рецензентам.
4. В листі у вільному форматі опишіть свою систему.
    1. Задачу, яку ви розв'язували
    2. При командному виконанні, напишіть хто брав участь в якій частині проєкту.
    3. Посилання на запущений сервіс.
    4. Інструкції з запуску, якщо є особливості.
    5. Посилання на програмний код або архів з ним.
5. Ви також є чиїмось рецензентом. При отриманні листа з виконаною роботою, перевірте чи все працює та відповідає опису. Якщо все добре, можете відповісти просто "LGTM" (розшифровується як "looks good to me") Якщо зауваження, напишіть про це у листі. Автор має можливість виправити ці проблеми або пояснити їх.


## Контакти
Дуже ймовірно, що під час виконання роботи у вас виникатимуть питання. У такому разі ви можете:
Запитати в чаті курсу у Discord.
Залишити коментар у цьому документі.
Запитати голосом або в чаті перед початком лекції.
Написати мені в приватні.
